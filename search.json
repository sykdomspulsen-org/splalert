[{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_simulation.html","id":"simulate-16-baselines","dir":"Articles","previous_headings":"","what":"Simulate 16 baselines","title":"Baseline data simulation","text":"Simulation 16 different time series count data. Parameter values data simulation presented Noufaily et al. (2019), table 1.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_simulation.html","id":"each-of-the-simulatation-take-into-account-a-combination-of-differents-properties-of-syndromic-data-such-as","dir":"Articles","previous_headings":"Simulate 16 baselines","what":"Each of the simulatation take into account a combination of differents properties of syndromic data such as:","title":"Baseline data simulation","text":"Baseline frequencies reports (determined parameter alpha) Linear trends (determined parameterbeta) Seasonal trends (determined parameters gamma_1 gamma_2), Day--week effects (determined parameters gamma_3 gamma_4) dispersion (determined parameter phi).","code":"baseline_1  <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 2,                                     alpha = 6,                                      beta = 0,                                      gamma_1 = 0.2,                                      gamma_2 = 0.2,                                      gamma_3 = 0.5,                                      gamma_4 = 0.4,                                      phi = 2,                                      shift_1 = 29                                    )    baseline_1[,s:=1]  baseline_2  <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 2,                                     alpha = 0.5,                                      beta = 0,                                      gamma_1 = 1.5,                                      gamma_2 = 1.4,                                      gamma_3 = 0.5,                                      gamma_4 = 0.4,                                      phi = 1,                                      shift_1 = -167                                    )   baseline_2[,s:=2]   baseline_3  <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 0,                                     weekly_pattern_n = 2,                                     alpha = 5.5,                                      beta = 0,                                      gamma_1 = 0,                                      gamma_2 = 0,                                      gamma_3 = 0.3,                                      gamma_4 = 0.25,                                      phi = 1,                                      shift_1 = 1                                   )  baseline_3[,s:=3]   baseline_4 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 0,                                     weekly_pattern_n = 2,                                     alpha = 0,                                      beta = 0,                                      gamma_1 = 0,                                      gamma_2 = 0,                                      gamma_3 = 0.3,                                     gamma_4 = 0.25,                                      phi = 1,                                      shift_1 = 1                                   )  baseline_4[,s:=4]  baseline_5 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 2,                                     alpha = 6,                                      beta = 0,                                      gamma_1 = 0.3,                                      gamma_2 = 2,                                      gamma_3 = 0.3,                                      gamma_4 = 0.5,                                      phi = 1.5,                                      shift_1 = -50                                    )  baseline_5[,s:=5]   baseline_6 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 1,                                     alpha = 1,                                      beta = 0,                                      gamma_1 = 0.1,                                      gamma_2 = 2,                                      gamma_3 = 0.05,                                      gamma_4 = 0.05,                                      phi = 1,                                      shift_1 = -50                                    )  baseline_6[,s:=6]   baseline_7 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 0,                                     weekly_pattern_n = 1,                                     alpha = 6,                                      beta = 0.0001,                                      gamma_1 = 0,                                      gamma_2 = 0,                                      gamma_3 = 0.6,                                      gamma_4 = 0.9,                                      phi = 1.5,                                      shift_1 = 0                                    )   baseline_7[,s:=7]  baseline_8 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 1,                                     alpha = 3,                                      beta = 0,                                      gamma_1 = 1.5,                                     gamma_2 = 0.1,                                      gamma_3 = 0.2,                                      gamma_4 = 0.3,                                      phi = 1,                                      shift_1 = -150 )    baseline_8[,s:=8]  baseline_9 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 1,                                     alpha = 3,                                      beta = 0,                                      gamma_1 = 0.2,                                      gamma_2 = 0.1,                                      gamma_3 = 0.05,                                      gamma_4 = 0.15,                                      phi = 1,                                      shift_1 = -200                                    )  baseline_9[,s:=9]   baseline_10 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 1,                                     alpha = 5,                                      beta = 0,                                      gamma_1 = 0.2,                                      gamma_2 = 0.1,                                      gamma_3 = 0.05,                                      gamma_4 = 0.1,                                      phi = 1,                                      shift_1 = 0                                    )   baseline_10[,s:=10]   baseline_11 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 2,                                     weekly_pattern_n = 1,                                     alpha = 0.5,                                      beta = 0,                                      gamma_1 = 0.4,                                      gamma_2 = 0,                                      gamma_3 = 0.05,                                      gamma_4 = 0.15,                                      phi = 1,                                      shift_1 = 0                                    )  baseline_11[,s:=11]   baseline_12 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 2,                                     weekly_pattern_n = 1,                                     alpha = 9,                                      beta = 0,                                      gamma_1 = 0.5,                                      gamma_2 = 0.2,                                      gamma_3 = 0.2,                                      gamma_4 = 0.4,                                      phi = 4,                                      shift_1 = 57                                   )   baseline_12[,s:=12]    baseline_13 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 2,                                     weekly_pattern_n = 1,                                     alpha = 2,                                     beta = 0.0005,                                      gamma_1 = 0.8,                                      gamma_2 = 0.8,                                      gamma_3 = 0.8,                                      gamma_4 = 0.4,                                      phi = 4,                                      shift_1 = 57                                    )  baseline_13[,s:=13]    baseline_14 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 4,                                     alpha = 0.05,                                      beta = 0,                                      gamma_1 = 0.01,                                      gamma_2 = 0.01,                                      gamma_3 = 1.8,                                      gamma_4 = 0.1,                                      phi = 1,                                      shift_1 = -85                                    )  baseline_14[,s:=14]   baseline_15 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 2,                                     alpha = 3,                                      beta = 0,                                      gamma_1 = 0.8,                                      gamma_2 = 0.6,                                      gamma_3 = 0.8,                                      gamma_4 = 0.4,                                      phi = 4,                                      shift_1 = 29)  baseline_15[,s:=15]    baseline_16 <- splalert::simulate_baseline_data(                                     start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 0,                                     weekly_pattern_n = 2,                                     alpha = 6,                                      beta = 0,                                      gamma_1 = 0,                                      gamma_2 = 0,                                      gamma_3 = 0.8,                                      gamma_4 = 0.4,                                      phi = 4,                                      shift_1 = 1                                   )                                      baseline_16[,s:=16]  baseline <- rbind(baseline_1,                   baseline_2,                   baseline_3,                   baseline_4,                   baseline_5,                   baseline_6,                   baseline_7,                   baseline_8,                   baseline_9,                   baseline_10,                   baseline_11,                   baseline_12,                   baseline_13,                   baseline_14,                   baseline_15,                   baseline_16)  baseline[, label:=paste(\"Sim\", s, sep=\" \")]  q <- ggplot(baseline, aes(x = date, y = n)) q <- q + geom_line(lwd = 1) q <- q + facet_wrap(~s, scales = \"free\") q <- q + splstyle::scale_fill_fhi(palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_simulation.html","id":"weekly-patterns","dir":"Articles","previous_headings":"","what":"Weekly patterns","title":"Baseline data simulation","text":"","code":"q <- ggplot(baseline, aes(wday, n, group=wday)) q <- q + facet_wrap(~s, scales = \"free\") q <- q + geom_boxplot() q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_simulation.html","id":"monthly-patterns","dir":"Articles","previous_headings":"","what":"Monthly patterns","title":"Baseline data simulation","text":"","code":"q <- ggplot(baseline, aes(wday, n, group=calmonth)) q <- q + facet_wrap(~s, scales = \"free\") q <- q + geom_boxplot() q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_with_outbreaks_simulation.html","id":"simulation-of-baseline-data","dir":"Articles","previous_headings":"","what":"Simulation of baseline data","title":"Baseline data simulation with seasonal and spike outbreaks","text":"","code":"baseline <- splalert::simulate_baseline_data(                                      start_date = as.Date(\"2012-01-01\"),                                     end_date = as.Date(\"2019-12-31\"),                                     seasonal_pattern_n = 1,                                     weekly_pattern_n = 2,                                     alpha = 3,                                      beta = 0,                                      gamma_1 = 0.8,                                      gamma_2 = 0.6,                                      gamma_3 = 0.8,                                      gamma_4 = 0.4,                                      phi = 2,                                      shift_1 = 6                                   ) baseline[,s:=15]  q <- ggplot(baseline, aes(x = date, y = n)) q <- q + geom_line(lwd = 1) q <- q + facet_wrap(~s, scales = \"free\") q <- q + splstyle::scale_fill_fhi(palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q # q <- ggplot(baseline, aes(wday, n, group=wday)) # q <- q + facet_wrap(~s, scales = \"free\") # q <- q + geom_boxplot() # q #  # q <- ggplot(baseline, aes(wday, n, group=calmonth)) # q <- q + facet_wrap(~s, scales = \"free\") # q <- q + geom_boxplot() # q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_with_outbreaks_simulation.html","id":"add-seasonal-outbreaks","dir":"Articles","previous_headings":"","what":"Add seasonal outbreaks","title":"Baseline data simulation with seasonal and spike outbreaks","text":"","code":"rm(baseline_with_seasonal) #> Warning in rm(baseline_with_seasonal): object 'baseline_with_seasonal' not found baseline_with_seasonal <- splalert::simulate_seasonal_outbreak_data (baseline,                                                            week_season_start = 40,                                                            week_season_peak = 4,                                                            week_season_end = 20,                                                            n_season_outbreak = 1,                                                            m = 30) #> NULL #> [1] 2012 2013 2014 2015 2016 2017 2018      q <- ggplot(baseline_with_seasonal, aes(x = date, y = n))     q <- q + geom_line(colour = \"red\")     q <- q + geom_line(data=baseline_with_seasonal, aes(x = date, y = n - seasonal_outbreak_n_rw ))     q <- q + facet_wrap(~s, scales = \"free\")     q <- q + splstyle::scale_fill_fhi(palette = \"contrast\")     q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\")     q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_with_outbreaks_simulation.html","id":"add-spikeoutbreak","dir":"Articles","previous_headings":"","what":"Add spikeoutbreak","title":"Baseline data simulation with seasonal and spike outbreaks","text":"","code":"baseline_with_seasonal_spike  <- splalert::simulate_spike_outbreak_data(baseline_with_seasonal,                                                                         n_sp_outbreak=1,                                                                         m = 15)     q <- ggplot(baseline_with_seasonal_spike, aes(x = date, y = n))   q <- q + geom_line(colour = \"green\")   q <- q + geom_line(data=baseline_with_seasonal, aes(x = date, y = n),colour = \"red\")   q <- q + geom_line(data=baseline, aes(x = date, y = n))   q <- q + splstyle::scale_fill_fhi(palette = \"contrast\")   q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\")   q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/baseline_data_with_outbreaks_simulation.html","id":"add-holiday-effect","dir":"Articles","previous_headings":"","what":"Add holiday effect –>","title":"Baseline data simulation with seasonal and spike outbreaks","text":"","code":"baseline_with_seasonal_spike_holiday  <- splalert::add_holiday_effect( baseline_with_seasonal_spike,                                                                 holiday_data= fhidata::norway_dates_holidays,                                                                holiday_effect=0.5)   baseline_with_seasonal_spike_holiday[,col:=seasonal_outbreak+sp_outbreak] q <- ggplot(baseline_with_seasonal_spike_holiday , aes(x = date, y = n,colour=as.factor(col)))  q <- q + geom_line(aes(group = 1))  q <- q + splstyle::scale_fill_fhi(palette = \"contrast\")  q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend.html","id":"covid-19-hospitalization-data","dir":"Articles","previous_headings":"","what":"Covid-19 Hospitalization data","title":"Short term trend","text":"Covid-19 hospitalization data contains daily weekly aggregated number hospitalization due Covid (main cause) Norway. data distinguish age groups sex. dataset extracted 2022-05-04. time period 2020-02-21 2022-05-03. data csv xlsx formats can found Github repository.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend.html","id":"data-in-spltidy-format","dir":"Articles","previous_headings":"Covid-19 Hospitalization data","what":"Data in spltidy format","title":"Short term trend","text":"prepared data spltidy format, can see summary column, data type amount missing data.","code":"d_hosp <- spltidy::norway_covid19_icu_and_hospitalization # check the column names colnames(d_hosp)   #>  [1] \"granularity_time\"                                #>  [2] \"granularity_geo\"                                 #>  [3] \"country_iso3\"                                    #>  [4] \"location_code\"                                   #>  [5] \"border\"                                          #>  [6] \"age\"                                             #>  [7] \"sex\"                                             #>  [8] \"isoyear\"                                         #>  [9] \"isoweek\"                                         #> [10] \"isoyearweek\"                                     #> [11] \"season\"                                          #> [12] \"seasonweek\"                                      #> [13] \"calyear\"                                         #> [14] \"calmonth\"                                        #> [15] \"calyearmonth\"                                    #> [16] \"date\"                                            #> [17] \"icu_with_positive_pcr_n\"                         #> [18] \"hospitalization_with_covid19_as_primary_cause_n\"  d_hosp #>               [unified]         [unified]      [unified]       [unified] #>             <character>       <character>    <character>     <character> #>                  NA=0 %            NA=0 %         NA=0 %          NA=0 % #>        granularity_time   granularity_geo   country_iso3   location_code #>   1:                day            nation            nor           norge #>   2:                day            nation            nor           norge #>   3:                day            nation            nor           norge #>   4:                day            nation            nor           norge #>   5:                day            nation            nor           norge #> ........................................................................ #> 915:            isoweek            nation            nor           norge #> 916:            isoweek            nation            nor           norge #> 917:            isoweek            nation            nor           norge #> 918:            isoweek            nation            nor           norge #> 919:            isoweek            nation            nor           norge #>  #>        [unified]     [unified]     [unified]   [unified]   [unified] #>        <integer>   <character>   <character>   <integer>   <integer> #>           NA=0 %        NA=0 %        NA=0 %      NA=0 %      NA=0 % #>           border           age           sex     isoyear     isoweek #>   1:        2020         total         total        2020           8 #>   2:        2020         total         total        2020           8 #>   3:        2020         total         total        2020           8 #>   4:        2020         total         total        2020           9 #>   5:        2020         total         total        2020           9 #> .................................................................... #> 915:        2020         total         total        2022          14 #> 916:        2020         total         total        2022          15 #> 917:        2020         total         total        2022          16 #> 918:        2020         total         total        2022          17 #> 919:        2020         total         total        2022          18 #>  #>          [unified]     [unified]    [unified]   [unified]   [unified]      [unified] #>        <character>   <character>    <numeric>   <integer>   <integer>    <character> #>             NA=0 %        NA=0 %       NA=0 %     NA=13 %     NA=13 %        NA=13 % #>        isoyearweek        season   seasonweek     calyear    calmonth   calyearmonth #>   1:       2020-08     2019/2020           31        2020           2       2020-M02 #>   2:       2020-08     2019/2020           31        2020           2       2020-M02 #>   3:       2020-08     2019/2020           31        2020           2       2020-M02 #>   4:       2020-09     2019/2020           32        2020           2       2020-M02 #>   5:       2020-09     2019/2020           32        2020           2       2020-M02 #> .................................................................................... #> 915:       2022-14     2021/2022           37          NA          NA             NA #> 916:       2022-15     2021/2022           38          NA          NA             NA #> 917:       2022-16     2021/2022           39          NA          NA             NA #> 918:       2022-17     2021/2022           40          NA          NA             NA #> 919:       2022-18     2021/2022           41          NA          NA             NA #>  #>         [unified]                 [context] #>            <Date>                 <integer> #>            NA=0 %                    NA=0 % #>              date   icu_with_positive_pcr_n #>   1:   2020-02-21                         0 #>   2:   2020-02-22                         0 #>   3:   2020-02-23                         0 #>   4:   2020-02-24                         0 #>   5:   2020-02-25                         0 #> ........................................... #> 915:   2022-04-10                        21 #> 916:   2022-04-17                        11 #> 917:   2022-04-24                        17 #> 918:   2022-05-01                         9 #> 919:   2022-05-08                         0 #>  #>                                              [context] #>                                              <integer> #>                                                 NA=0 % #>        hospitalization_with_covid19_as_primary_cause_n #>   1:                                                 0 #>   2:                                                 0 #>   3:                                                 0 #>   4:                                                 0 #>   5:                                                 0 #> ...................................................... #> 915:                                               211 #> 916:                                               157 #> 917:                                               137 #> 918:                                                74 #> 919:                                                10"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend.html","id":"weekly-observations","dir":"Articles","previous_headings":"","what":"Weekly observations","title":"Short term trend","text":"Now run short_term_trend function weekly data. can check columns added original data. can visualize trend indicator different colors. use splstyle customized ggplot2 syntax standardized graphic styles.","code":"d_hosp_weekly <- d_hosp[granularity_time==\"isoweek\"]   res <- splalert::short_term_trend(   d_hosp_weekly,    numerator = \"hospitalization_with_covid19_as_primary_cause_n\",   trend_isoweeks = 6,   remove_last_isoweeks = 1 )  # create the trend label res[, hospitalization_with_covid19_as_primary_cause_trend0_42_status := factor(   hospitalization_with_covid19_as_primary_cause_trend0_42_status,   levels = c(\"training\",\"forecast\",\"decreasing\", \"null\", \"increasing\"),   labels = c(\"Training\",\"Forecast\",\"Decreasing\", \"Null\", \"Increasing\") )]  colnames(res) #>  [1] \"granularity_time\"                                                              #>  [2] \"granularity_geo\"                                                               #>  [3] \"country_iso3\"                                                                  #>  [4] \"location_code\"                                                                 #>  [5] \"border\"                                                                        #>  [6] \"age\"                                                                           #>  [7] \"sex\"                                                                           #>  [8] \"isoyear\"                                                                       #>  [9] \"isoweek\"                                                                       #> [10] \"isoyearweek\"                                                                   #> [11] \"season\"                                                                        #> [12] \"seasonweek\"                                                                    #> [13] \"calyear\"                                                                       #> [14] \"calmonth\"                                                                      #> [15] \"calyearmonth\"                                                                  #> [16] \"date\"                                                                          #> [17] \"icu_with_positive_pcr_n\"                                                       #> [18] \"hospitalization_with_covid19_as_primary_cause_n\"                               #> [19] \"hospitalization_with_covid19_as_primary_cause_forecasted_n\"                    #> [20] \"hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q02x5_n\" #> [21] \"hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q97x5_n\" #> [22] \"hospitalization_with_covid19_as_primary_cause_forecasted_n_forecast\"           #> [23] \"hospitalization_with_covid19_as_primary_cause_trend0_42_status\"                #> [24] \"hospitalization_with_covid19_as_primary_cause_doublingdays0_42\" # check some columns  res[, .(date,          hospitalization_with_covid19_as_primary_cause_n,          hospitalization_with_covid19_as_primary_cause_forecasted_n,         hospitalization_with_covid19_as_primary_cause_trend0_42_status)] #>         [unified]                                         [context] #>            <Date>                                         <integer> #>            NA=0 %                                            NA=5 % #>              date   hospitalization_with_covid19_as_primary_cause_n #>   1:   2020-02-23                                                 0 #>   2:   2020-03-01                                                 0 #>   3:   2020-03-08                                                 2 #>   4:   2020-03-15                                                50 #>   5:   2020-03-22                                               188 #> ................................................................... #> 118:   2022-05-22                                                NA #> 119:   2022-05-29                                                NA #> 120:   2022-06-05                                                NA #> 121:   2022-06-12                                                NA #> 122:   2022-06-19                                                NA #>  #>                                                         [context] #>                                                         <integer> #>                                                            NA=0 % #>        hospitalization_with_covid19_as_primary_cause_forecasted_n #>   1:                                                            0 #>   2:                                                            0 #>   3:                                                            2 #>   4:                                                           50 #>   5:                                                          188 #> ................................................................. #> 118:                                                           40 #> 119:                                                           30 #> 120:                                                           23 #> 121:                                                           18 #> 122:                                                           13 #>  #>                                                             [context] #>                                                              <factor> #>                                                                NA=0 % #>        hospitalization_with_covid19_as_primary_cause_trend0_42_status #>   1:                                                         Training #>   2:                                                         Training #>   3:                                                         Training #>   4:                                                         Training #>   5:                                                         Training #> ..................................................................... #> 118:                                                         Forecast #> 119:                                                         Forecast #> 120:                                                         Forecast #> 121:                                                         Forecast #> 122:                                                         Forecast q <- ggplot(res, aes(x = isoyearweek, y = hospitalization_with_covid19_as_primary_cause_forecasted_n, group = 1)) q <- q + geom_col(mapping = aes(fill = hospitalization_with_covid19_as_primary_cause_trend0_42_status )) q <- q + geom_errorbar(   mapping = aes(     ymin = hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q02x5_n,     ymax = hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q97x5_n   ) ) q <- q + scale_y_continuous(\"Weekly hospitalization with Covid-19 as primary cause\", expand = c(0, 0.1)) q <- q + scale_x_discrete(\"Isoyearweek\", breaks = splstyle::every_nth(8)) q <- q + expand_limits(y=0) q <- q + splstyle::scale_fill_fhi(\"6 week trend\", palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q <- q + splstyle::set_x_axis_vertical() q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend.html","id":"daily-observations","dir":"Articles","previous_headings":"","what":"Daily observations","title":"Short term trend","text":"Similarly, can also analysis using daily data. can also visualize trend figure.  Another way visualize trend","code":"d_hosp_daily <- d_hosp[granularity_time==\"day\"]  res <- splalert::short_term_trend(   d_hosp_daily,    numerator = \"hospitalization_with_covid19_as_primary_cause_n\",   trend_days = 28,   remove_last_days = 7 ) res[, hospitalization_with_covid19_as_primary_cause_trend0_28_status := factor(   hospitalization_with_covid19_as_primary_cause_trend0_28_status,   levels = c(\"training\",\"forecast\",\"decreasing\", \"null\", \"increasing\"),   labels = c(\"Training\",\"Forecast\",\"Decreasing\", \"Null\", \"Increasing\") )] q <- ggplot(data = res, mapping = aes(x = date, y = hospitalization_with_covid19_as_primary_cause_forecasted_n, fill = hospitalization_with_covid19_as_primary_cause_trend0_28_status)) q <- q + geom_col(alpha = 0) # necessary to get legend to be in right order q <- q + geom_col(   data = res[hospitalization_with_covid19_as_primary_cause_trend0_28_status!=\"Forecast\"]   ) q <- q + geom_ribbon(   data = res[hospitalization_with_covid19_as_primary_cause_trend0_28_status==\"Forecast\"],    mapping = aes(     ymin = hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q02x5_n,     ymax = hospitalization_with_covid19_as_primary_cause_forecasted_predinterval_q97x5_n   ),   alpha = 0.75 ) q <- q + scale_y_continuous(\"Daily hospitalization with Covid-19 as primary cause\", expand = c(0, 0.1)) q <- q + scale_x_date(\"Date\", date_breaks = \"28 days\", date_labels = \"%y-%m-%d\") # q <- q + scale_x_discrete(breaks = splstyle::every_nth(8)) q <- q + expand_limits(y=0)  q <- q + splstyle::scale_fill_fhi(\"28 days trend\", palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q <- q + splstyle::set_x_axis_vertical() q q <- ggplot(res, aes(x = date, y = hospitalization_with_covid19_as_primary_cause_doublingdays0_28)) q <- q + geom_rect(aes(xmin = date-1, xmax=date, ymin = 1, ymax = Inf, fill = hospitalization_with_covid19_as_primary_cause_trend0_28_status), alpha = 0.5) q <- q + geom_line(lwd = 1) q <- q + scale_y_continuous(trans = \"log10\", expand = c(0, 0.1)) q <- q + splstyle::scale_fill_fhi(palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q #> Warning in self$trans$transform(x): NaNs produced #> Warning: Transformation introduced infinite values in continuous y-axis #> Warning in self$trans$transform(x): NaNs produced #> Warning: Transformation introduced infinite values in continuous y-axis #> Warning: Removed 104 row(s) containing missing values (geom_path)."},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis.html","id":"covid-19-msis-cases","dir":"Articles","previous_headings":"","what":"Covid-19 MSIS cases","title":"Short term trend for COVID cases Part 1 epicurve","text":"Covid-19 cases (lab confirmed) Norway, county whole nation. data distinguish age groups sex. dataset extracted 2022-05-04. time period 2020-02-21 2022-05-03. data csv xlsx formats can found Github repository.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis.html","id":"data-in-spltidy-format","dir":"Articles","previous_headings":"Covid-19 MSIS cases","what":"Data in spltidy format","title":"Short term trend for COVID cases Part 1 epicurve","text":"prepared data spltidy format, can see summary column, data type amount missing data.","code":"d_msis <- spltidy::norway_covid19_cases_by_time_location # check the column names colnames(d_msis)   #>  [1] \"granularity_time\"                \"granularity_geo\"                 #>  [3] \"country_iso3\"                    \"location_code\"                   #>  [5] \"border\"                          \"age\"                             #>  [7] \"sex\"                             \"isoyear\"                         #>  [9] \"isoweek\"                         \"isoyearweek\"                     #> [11] \"season\"                          \"seasonweek\"                      #> [13] \"calyear\"                         \"calmonth\"                        #> [15] \"calyearmonth\"                    \"date\"                            #> [17] \"covid19_cases_testdate_n\"        \"covid19_cases_testdate_pr100000\""},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis.html","id":"understand-the-data","dir":"Articles","previous_headings":"Covid-19 MSIS cases","what":"Understand the data","title":"Short term trend for COVID cases Part 1 epicurve","text":"(granularity geo location codes) (one visualization counts county)  (another visualization pr, including nation)","code":"d_fylke <- copy(d_msis[granularity_time == 'isoweek'& granularity_geo == 'county'] ) q <- ggplot(d_fylke, aes(x = isoyearweek, y = covid19_cases_testdate_n)) q <- q + geom_line(aes(group = location_code, col = location_code),size = 2) q <- q + scale_y_continuous(\"Weekly MSIS cases\",                             expand = expansion(mult = c(0, 0.1)),                             labels = splstyle::format_nor_num_0)  q <- q + scale_x_discrete(\"Isoyearweek\",                           breaks = splstyle::every_nth(8))  q <- q + splstyle::scale_color_fhi(\"Location\", palette = \"primary\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q <- q + splstyle::set_x_axis_vertical() # need watermark!! q q <- ggplot(d_fylke, aes(x = isoyearweek, y = covid19_cases_testdate_pr100000)) q <- q + geom_line(aes(group = location_code, col = location_code),size = 2) q <- q + scale_y_continuous(\"Weekly MSIS cases (per 100 000)\",                             expand = expansion(mult = c(0, 0.1)),                             labels = splstyle::format_nor_num_0)  q <- q + scale_x_discrete(\"Isoyearweek\",                           breaks = splstyle::every_nth(8))  q <- q + splstyle::scale_color_fhi(\"Location\", palette = \"primary\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q <- q + splstyle::set_x_axis_vertical() # need watermark!! q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis.html","id":"weekly-trend","dir":"Articles","previous_headings":"","what":"1. weekly trend","title":"Short term trend for COVID cases Part 1 epicurve","text":"(maybe whole period, visualise one year) (nation, county)  part 2 COVID analysis, demonstrate trend analysis counties, visualize results map.","code":"d_msis_norge <- copy(d_msis[granularity_time == 'isoweek' &                          isoyearweek >= '2021-26' &                          location_code == 'norge'])  trend_msis_norge <- splalert::short_term_trend(   d_msis_norge,   numerator = \"covid19_cases_testdate_n\",   trend_isoweeks = 6,   remove_last_isoweeks = 1 )   # colnames(trend_msis_norge)  # attach status for vis trend_msis_norge[, covid19_cases_testdate_trend0_42_status := factor(   covid19_cases_testdate_trend0_42_status,   levels = c(\"training\",\"forecast\",\"decreasing\", \"null\", \"increasing\"),   labels = c(\"Training\",\"Forecast\",\"Decreasing\", \"Null\", \"Increasing\") )]   # plot q <- ggplot(trend_msis_norge, aes(x = isoyearweek,                             y = covid19_cases_testdate_forecasted_n,                             group = 1)) q <- q + geom_col(mapping = aes(fill = covid19_cases_testdate_trend0_42_status )) q <- q + geom_errorbar(   mapping = aes(     ymin = covid19_cases_testdate_forecasted_predinterval_q02x5_n,     ymax = covid19_cases_testdate_forecasted_predinterval_q97x5_n   ) ) q <- q + scale_y_continuous(\"Weekly MSIS cases\",                             expand = c(0, 0.1),                             labels = splstyle::format_nor_num_0) q <- q + scale_x_discrete(\"Isoyearweek\", breaks = splstyle::every_nth(6)) q <- q + expand_limits(y=0) q <- q + splstyle::scale_fill_fhi(\"6 week trend\", palette = \"contrast\") q <- q + splstyle::theme_fhi_lines_horizontal(legend_position = \"bottom\") q <- q + splstyle::set_x_axis_vertical() q"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis_map.html","id":"covid-19-msis-cases","dir":"Articles","previous_headings":"","what":"Covid-19 MSIS cases","title":"Short term trend for COVID cases Part 2 map","text":"Covid-19 cases (lab confirmed) Norway, county whole nation. data distinguish age groups sex. dataset extracted 2022-05-04. time period 2020-02-21 2022-05-03. data csv xlsx formats can found Github repository.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis_map.html","id":"data-in-spltidy-format","dir":"Articles","previous_headings":"Covid-19 MSIS cases","what":"Data in spltidy format","title":"Short term trend for COVID cases Part 2 map","text":"prepared data spltidy format, can see summary column, data type amount missing data.","code":"d_msis <- spltidy::norway_covid19_cases_by_time_location # check the column names # colnames(d_msis)"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis_map.html","id":"plan-analysis-for-all-locations-with-plnr","dir":"Articles","previous_headings":"","what":"1. Plan analysis for all locations with plnr","title":"Short term trend for COVID cases Part 2 map","text":"First define new plan, add data following way. Next add argument sets (call argset). want repeat analysis locations available dataset, 1 nation 11 counties. can done expand_list(). Next create action. allows us develop interact one data specification (e.g. location_code == 'county03') without explicit filtering. specific subset, carry one function like previous example, splalert::shorterm_trend. Return result end action function. Now apply action function 12 data specifications.","code":"# We begin by defining a new plan p <- plnr::Plan$new()  # 1. add data  data_fn <- function(){   return(d_msis) }  p$add_data(   name = \"covid19_cases\",   fn_name = \"data_fn\" )  p$get_data() %>% names #> [1] \"covid19_cases\" \"hash\" # 2. add argset  # check location codes location_codes <- p$get_data()$covid19_cases$location_code %>%   unique() %>%   print() #>  [1] \"county03\" \"county11\" \"county15\" \"county18\" \"county30\" \"county34\" #>  [7] \"county38\" \"county42\" \"county46\" \"county50\" \"county54\" \"norge\"  p$add_argset_from_list(   plnr::expand_list(     location_code = location_codes,     granularity_time = \"isoweek\"   ) ) # Examine the argsets that are available p$get_argsets_as_dt() #>                            name_analysis index_analysis location_code #>  1: bcd545c2-f9ec-4daa-8179-ea6817c8b37b              1      county03 #>  2: 7241d7cb-81f3-4dfa-9ee2-d9c71f0a840d              2      county11 #>  3: 96e1d9f3-8417-4515-bcd4-b130bdc8176e              3      county15 #>  4: c1dbca14-d783-4533-96b2-dca81649bb7f              4      county18 #>  5: adf571e5-5c2c-46ff-be8f-ee293ed84e43              5      county30 #>  6: d6c0538f-db06-4d6c-9118-88c60d16f20c              6      county34 #>  7: 39552024-c722-44b8-a1ba-11faf51798fb              7      county38 #>  8: 817ee13f-6882-4834-9065-b25d5e10699a              8      county42 #>  9: a946ffa3-3eca-4d97-b336-089c40009865              9      county46 #> 10: eba80238-fdf8-4893-8343-38dc7de362ff             10      county50 #> 11: 08f066a9-07cc-44b2-8e49-89182384c7bd             11      county54 #> 12: 98d28f88-6a29-494b-837a-3b60218b3bc8             12         norge #>     granularity_time #>  1:          isoweek #>  2:          isoweek #>  3:          isoweek #>  4:          isoweek #>  5:          isoweek #>  6:          isoweek #>  7:          isoweek #>  8:          isoweek #>  9:          isoweek #> 10:          isoweek #> 11:          isoweek #> 12:          isoweek # 3. action # To do this, we first need to create an action function # (takes two arguments -- data and argset)  action_fn <- function(data, argset){   if(plnr::is_run_directly()){     data <- p$get_data()     argset <- p$get_argset(1)  # county03, isoweek   }   # develop function for ONE argset only    # data   pd <- data$covid19_cases[     location_code == argset$location_code &       granularity_time == argset$granularity_time   ]    # function   trend_msis <- splalert::short_term_trend(     pd,     numerator = \"covid19_cases_testdate_n\",     trend_isoweeks = 6,     remove_last_isoweeks = 1   )   # return   trend_msis  } # apply this to all 12 argsets p$apply_action_fn_to_all_argsets(fn_name = \"action_fn\")"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis_map.html","id":"run-analysis-for-all-12-argsets","dir":"Articles","previous_headings":"","what":"2. Run analysis for all 12 argsets","title":"Short term trend for COVID cases Part 2 map","text":"can run analysis one one, run 12 together. results saved list length 12. can access way access list. can collect results list one data table.","code":"# run one by one # p$run_one(1) # p$run_one(2)  # run together res <- p$run_all_progress() res_county03 <- res[[1]] print(res_county03[, .(location_code, date, covid19_cases_testdate_n, covid19_cases_testdate_trend0_42_status)]) #>            [unified]    [unified]                  [context] #>          <character>       <Date>                  <integer> #>               NA=0 %       NA=0 %                     NA=5 % #>        location_code         date   covid19_cases_testdate_n #>   1:        county03   2020-02-23                          0 #>   2:        county03   2020-03-01                          7 #>   3:        county03   2020-03-08                         39 #>   4:        county03   2020-03-15                        276 #>   5:        county03   2020-03-22                        366 #> ............................................................ #> 118:        county03   2022-05-22                         NA #> 119:        county03   2022-05-29                         NA #> 120:        county03   2022-06-05                         NA #> 121:        county03   2022-06-12                         NA #> 122:        county03   2022-06-19                         NA #>  #>                                      [context] #>                                       <factor> #>                                         NA=0 % #>        covid19_cases_testdate_trend0_42_status #>   1:                                  training #>   2:                                  training #>   3:                                  training #>   4:                                  training #>   5:                                  training #> .............................................. #> 118:                                  forecast #> 119:                                  forecast #> 120:                                  forecast #> 121:                                  forecast #> 122:                                  forecast res_unlisted <- rbindlist(res)"},{"path":"https://docs.sykdomspulsen.no/splalert/articles/short_term_trend_msis_map.html","id":"visualize-in-a-map","dir":"Articles","previous_headings":"","what":"3. visualize in a map","title":"Short term trend for COVID cases Part 2 map","text":"Now make map  Add label","code":"# select data for one week (narrow data) this_isoyearweek <- '2021-44' d_msis_this_isoyearweek <- res_unlisted[granularity_geo == 'county' &                                    isoyearweek == this_isoyearweek,                                    .(location_code,                                      date,                                      isoyearweek,                                      covid19_cases_testdate_pr100000,                                      covid19_cases_testdate_trend0_42_status)]   d_msis_this_isoyearweek[, trend := factor(   covid19_cases_testdate_trend0_42_status,   levels = c('decreasing','null', 'increasing') )] pd <- copy(splmaps::nor_nuts3_map_b2020_insert_oslo_dt)   # join the map data.table pd[d_msis_this_isoyearweek,on=\"location_code\",trend:=trend]  # plot map q <- ggplot() q <- q + geom_polygon(   data = pd,   mapping = aes(x = long, y = lat, group = group,fill=trend),   color=\"black\",   size=0.25 ) q <- q + coord_quickmap() q <- q + theme_void() q <- q + labs(title=glue::glue(\"MSIS cases per 100k population for week \", this_isoyearweek)) q <- q + splstyle::scale_fill_fhi(\"Trend\",palette = \"warning\", direction = 1, drop=F)  # include date date_update <- as.character(unique(d_msis_this_isoyearweek$date)) q <- q + labs(caption = glue::glue(\"Date updated \", date_update))  # add watermark later! q # now we add label to the map # which contains county name + case per 100k labels <- copy(splmaps::nor_nuts3_position_geolabels_b2020_insert_oslo_dt) labels[   d_msis_this_isoyearweek,   on = \"location_code\",   cases_100k := covid19_cases_testdate_pr100000 ]  labels[   spldata::nor_locations_names(),   on = \"location_code\",   location_name := location_name ]  # format case, remove decimal labels[, cases_100k := splstyle::format_nor_num_0(cases_100k)] labels #>     location_code     long      lat cases_100k        location_name #>  1:      county30  8.85000 60.60000        171                Viken #>  2:      county03 20.85000 62.00000        260                 Oslo #>  3:      county34 11.00000 61.86886        131            Innlandet #>  4:      county38  8.50000 59.32481         84 Vestfold og Telemark #>  5:      county42  7.80000 58.30000         72                Agder #>  6:      county11  6.10000 58.70000        167             Rogaland #>  7:      county46  6.50000 61.45000        113             Vestland #>  8:      county15  7.80000 62.50000        110      Møre og Romsdal #>  9:      county18 14.80000 66.75000        168             Nordland #> 10:      county54 22.94275 69.50000        412    Troms og Finnmark #> 11:      county50 12.00000 64.15000        297            Trøndelag  # put case 100k together with county name labels[, label := paste0(location_name, '\\n', cases_100k, '/100k')]  q <- q + ggrepel::geom_label_repel(   data = labels,   mapping = aes(x = long, y = lat, label = label) ) q"},{"path":[]},{"path":"https://docs.sykdomspulsen.no/splalert/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"package proudly brought : Beatriz Valcarcel Salamanca. Author, maintainer. Chi Zhang. Author. Richard Aubrey White. Author. . Copyright holder. See changelog contributors. 🙏","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Salamanca BV, Zhang C, White RA (2022). splalert: Alerts public health surveillance data. https://docs.sykdomspulsen./splalert, https://github.com/sykdomspulsen-org/splalert.","code":"@Manual{,   title = {splalert: Alerts from public health surveillance data},   author = {Beatriz Valcarcel Salamanca and Chi Zhang and Richard Aubrey White},   year = {2022},   note = {https://docs.sykdomspulsen.no/splalert, https://github.com/sykdomspulsen-org/splalert}, }"},{"path":[]},{"path":"https://docs.sykdomspulsen.no/splalert/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Alerts from public health surveillance data","text":"splalert helps create alerts public health surveillance data. Read introduction vignette run help(package=\"splalert\").","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/index.html","id":"splverse","dir":"","previous_headings":"","what":"splverse","title":"Alerts from public health surveillance data","text":"splverse set R packages developed help solve problems frequently occur performing infectious disease surveillance. want install dev versions (access packages haven’t released CRAN), run usethis::edit_r_profile() edit .Rprofile. write : Save file restart R. can now install splverse packages drat repository.","code":"options(   repos = structure(c(     SPLVERSE  = \"https://docs.sykdomspulsen.no/drat/\",     CRAN      = \"https://cran.rstudio.com\"   )) ) install.packages(\"splalert\")"},{"path":"https://docs.sykdomspulsen.no/splalert/license.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 Folkehelseinstituttet Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/add_holiday_effect.html","id":null,"dir":"Reference","previous_headings":"","what":"Holiday effect ---- — add_holiday_effect","title":"Holiday effect ---- — add_holiday_effect","text":"effect public holiday time series daily counts","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/add_holiday_effect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Holiday effect ---- — add_holiday_effect","text":"","code":"add_holiday_effect(data, holiday_data, holiday_effect = 2)"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/add_holiday_effect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Holiday effect ---- — add_holiday_effect","text":"data splfmt_rds data object holiday_data dates holiday_effect Ending date simulation period.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/add_holiday_effect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Holiday effect ---- — add_holiday_effect","text":"splfmt_rts_data_v1, data.table containing","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.glm.html","id":null,"dir":"Reference","previous_headings":"","what":"Prediction thresholds — prediction_interval.glm","title":"Prediction thresholds — prediction_interval.glm","text":"Prediction thresholds","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.glm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prediction thresholds — prediction_interval.glm","text":"","code":"# S3 method for glm prediction_interval(   object,   newdata,   alpha = 0.05,   z = NULL,   skewness_transform = \"none\",   ... )"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.glm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prediction thresholds — prediction_interval.glm","text":"object Object newdata New data alpha Two-sided alpha (e.g 0.05) z Similar alpha (e.g. z=1.96 alpha=0.05) skewness_transform \"none\", \"1/2\", \"2/3\" ... dots","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Prediction thresholds — prediction_interval","title":"Prediction thresholds — prediction_interval","text":"Prediction thresholds","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prediction thresholds — prediction_interval","text":"","code":"prediction_interval(object, newdata, alpha = 0.05, z = NULL, ...)"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/prediction_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prediction thresholds — prediction_interval","text":"object Object newdata New data alpha Two-sided alpha (e.g 0.05) z Similar alpha (e.g. z=1.96 alpha=0.05) ... dots","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/short_term_trend.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine the short term trend — short_term_trend","title":"Determine the short term trend — short_term_trend","text":"Determine short term trend","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/short_term_trend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine the short term trend — short_term_trend","text":"","code":"short_term_trend(   x,   numerator,   denominator = NULL,   prX = 100,   trend_days = 42,   remove_last_days = 0,   forecast_days = trend_days,   trend_isoweeks = ceiling(trend_days/7),   remove_last_isoweeks = ceiling(remove_last_days/7),   forecast_isoweeks = trend_isoweeks,   numerator_naming_prefix = \"from_numerator\",   denominator_naming_prefix = \"from_denominator\",   statistics_naming_prefix = \"universal\",   remove_training_data = FALSE )"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/short_term_trend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine the short term trend — short_term_trend","text":"x Data object numerator Character name numerator denominator Character name denominator (optional) prX using denominator, scaling factor used numerator/denominator? trend_days Number days want check trend remove_last_days Number days want remove end (due unreliable data) forecast_days Number days want forecast future trend_isoweeks trend_days, used granularity_geo=='isoweek' remove_last_isoweeks remove_last_days, used granularity_geo=='isoweek' forecast_isoweeks forecast_days, used granularity_geo=='isoweek' numerator_naming_prefix \"from_numerator\", \"generic\", custom prefix denominator_naming_prefix \"from_denominator\", \"generic\", custom prefix statistics_naming_prefix \"universal\" (one variable trend status, one variable doubling days), \"from_numerator_and_prX\" (denominator NULL, one variable corresponding numerator. denominator exists, one variable prXs) remove_training_data Boolean. TRUE, removes training data (.e. 1:(trend_days-1) 1:(trend_isoweeks-1)) returned dataset.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_baseline_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","title":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","text":"function simulates time series daily counts absence outbreaks. Data simulated using poisson/negative binomial model described Noufaily et al. (2019). Properties time series frequency baseline observations, trend, seasonal weekly pattern can specified simulation.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_baseline_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","text":"","code":"simulate_baseline_data(   start_date,   end_date,   seasonal_pattern_n,   weekly_pattern_n,   alpha,   beta,   gamma_1,   gamma_2,   gamma_3,   gamma_4,   phi,   shift_1 )"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_baseline_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","text":"start_date Starting date simulation period. Date format 'yyyy-mm-dd'. end_date Ending date simulation period. Date format 'yyyy-mm-dd'. seasonal_pattern_n Number seasonal patterns. seasonal pattern seasonal_pattern_n = 0. Seasonal_pattern_n = 1 represents annual pattern. Seasonal_pattern_n = 2 indicates biannual pattern. weekly_pattern_n Number weekly patterns. specific weekly pattern, weekly_pattern_n = 0. Weekly_pattern_n = 1 represents one weekly peak. alpha parameter used specify baseline frequencies reports beta parameter used specify specify linear trend gamma_1 parameter used specify seasonal pattern gamma_2 parameter used specify seasonal pattern gamma_3 parameter used specify day--week pattern gamma_4 parameter used specify day--week pattern phi Dispersion parameter. phi =0, Poisson model used simulate baseline data. shift_1 Horizontal shift parameter help control week/month peaks.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_baseline_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","text":"splfmt_rts_data_v1, data.table containing time series counts wday day--week n cases","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_baseline_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate baseline data ----\nSimulation of baseline data. — simulate_baseline_data","text":"","code":"baseline  <- simulate_baseline_data( start_date = as.Date(\"2012-01-01\"), end_date = as.Date(\"2019-12-31\"), seasonal_pattern_n = 1, weekly_pattern_n = 1, alpha = 3, beta = 0, gamma_1 = 0.8, gamma_2 = 0.6, gamma_3 = 0.8, gamma_4 = 0.4, phi = 4, shift_1 = 29 )"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_seasonal_outbreak_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate seasonal outbreaks ---- — simulate_seasonal_outbreak_data","title":"Simulate seasonal outbreaks ---- — simulate_seasonal_outbreak_data","text":"Simulation seasonal outbreaks syndromes/diseases follows seasonal trends. Seasonal outbreaks variable size timing  seasonal patterns. number seasonal outbreaks occur year defined n_season_outbreak. parameters week_season_start week_season_end define season window. start seasonal outbreak drawn season window weeks, higher probability outbreak occurs around peak season (week_season_peak). seasonal outbreak size (excess number cases occurs outbreak) simulated using poisson distribution described Noufaily et al. (2019).","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_seasonal_outbreak_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate seasonal outbreaks ---- — simulate_seasonal_outbreak_data","text":"","code":"simulate_seasonal_outbreak_data(   data,   week_season_start = 40,   week_season_peak = 4,   week_season_end = 20,   n_season_outbreak = 1,   m = 50 )"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_seasonal_outbreak_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate seasonal outbreaks ---- — simulate_seasonal_outbreak_data","text":"data splfmt_rds data object week_season_start Starting season week number week_season_peak Peak season week number week_season_end Ending season week number n_season_outbreak Number seasonal outbreaks simulated m Parameter determine size outbreak (m times standard deviation baseline count starting day seasonal outbreak)","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_seasonal_outbreak_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate seasonal outbreaks ---- — simulate_seasonal_outbreak_data","text":"splfmt_rts_data_v1, data.table","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_spike_outbreak_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate spiked outbreaks ---- — simulate_spike_outbreak_data","title":"Simulate spiked outbreaks ---- — simulate_spike_outbreak_data","text":"Simulation spiked outbreak described Noufaily et al. (2019). method simulating spiked outbreak similar seasonal outbreaks simulation shorter duration added last year data (prediction data). Spiked outbreaks can start week prediction data","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_spike_outbreak_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate spiked outbreaks ---- — simulate_spike_outbreak_data","text":"","code":"simulate_spike_outbreak_data(data, n_sp_outbreak = 1, m)"},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_spike_outbreak_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate spiked outbreaks ---- — simulate_spike_outbreak_data","text":"data splfmt_rds data object n_sp_outbreak Number spiked outbreaks simulated m Parameter determine size outbreak (m times standard deviation baseline count starting day seasonal outbreak)","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/reference/simulate_spike_outbreak_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate spiked outbreaks ---- — simulate_spike_outbreak_data","text":"splfmt_rts_data_v1, data.table","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/news/index.html","id":"splalert-202256","dir":"Changelog","previous_headings":"","what":"splalert 2022.5.6","title":"splalert 2022.5.6","text":"short_term_trend now allows vectorized prX statistics_naming_prefix.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/news/index.html","id":"splalert-2022422","dir":"Changelog","previous_headings":"","what":"splalert 2022.4.22","title":"splalert 2022.4.22","text":"short_term_trend now allows granularity_time==‘isoweek’ denominators.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/news/index.html","id":"splalert-2022421","dir":"Changelog","previous_headings":"","what":"splalert 2022.4.21","title":"splalert 2022.4.21","text":"short_term_trend created allow easy estimation short-term trends (increasing/decreasing/null), doubling time days, short-term forecasting prediction intervals. prediction_interval created allow easy estimation prediction intervals fitting glms (family = poisson quasipoisson) based Farrington 1996.","code":""},{"path":"https://docs.sykdomspulsen.no/splalert/news/index.html","id":"splalert-2022410","dir":"Changelog","previous_headings":"","what":"splalert 2022.4.10","title":"splalert 2022.4.10","text":"Package created","code":""}]
